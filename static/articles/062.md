<!-- title:Swift：CFDataGetLengthの値がおかしい話 -->

[こちら](https://qiita.com/lovee/items/74c0310a50d1b752ceb8)を参考にして CGImage のピクセルデータを抽出して色々しようとしていたところ，`CFDataGetLength`で取得する値が明らかにおかしいことがあることに気づきました．

基本的に画像のピクセルデータは`Red`,`Green`,`Blue`,`Alpha`の４つで，`CFDataGetBytePtr`ではその四つが数珠繋ぎ状に連なったデータが手に入るはずです．
その場合，そのデータ数は`画像の横幅`×`画像の高さ`×`4`となるはずなのですが，`CFDataGetLength`で取得するデータ数はこれよりも大きな値が返ってくることがあります．
写真データではこの問題が発生しないようなのですが，アルバムに保存したイラストなどの画像データだと頻発するようです．

実際にどんな値が入っているのか観察してみました．

![data.png](./images/article/fba794ed-1bb1-62b7-23a5-bfdb8d11e81c.png)

1 行の終わりの位置で`Red`,`Green`,`Blue`,`Alpha`の４つ全てが 0 になっている謎のポイントがあることに気づきました．
これを検出してあげればいいのでしょうか．
